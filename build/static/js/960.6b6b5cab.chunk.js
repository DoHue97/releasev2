"use strict";(self.webpackChunkconsumerportal_v2=self.webpackChunkconsumerportal_v2||[]).push([[960,907],{10960:function(e,n,r){r.r(n),r.d(n,{default:function(){return m}});var t=r(74165),a=r(15861),s=r(29439),o=r(20907),c=r(62398),i=r(72791),d=r(39230),u=(r(33098),r(57689)),l=r(99298),f=r(80184),x=l.custom_page.my_card&&l.custom_page.my_card.view?r(27768).default:o.default;function m(e){var n=(0,d.$G)().t,r=((0,u.s0)(),(0,i.useState)(null)),o=(0,s.Z)(r,2),l=o[0],m=o[1],p=(0,i.useState)(!1),h=(0,s.Z)(p,2),C=h[0],g=h[1],Z=(0,i.useState)(!1),j=(0,s.Z)(Z,2),y=j[0],_=j[1],v=(0,i.useState)(null),w=(0,s.Z)(v,2),k=w[0],P=w[1],A=(0,i.useState)(!1),b=(0,s.Z)(A,2),S=b[0],R=b[1],E=(0,i.useState)(!1),I=(0,s.Z)(E,2),O=I[0],D=I[1];(0,i.useEffect)((function(){F()}),[]);var F=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!n),e.prev=1,e.next=4,c.default.payment.getListPaymentMethods();case 4:r=e.sent,console.log("AAAA getCards result: ",r),"OK"==r.code&&m(r.data.content),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("AAAA getCards exception:",e.t0);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,F(!0);case 3:R(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,c.default.payment.setPrimaryCard(r.id);case 4:if(a=e.sent,console.log("AAAA onSetPrimaryCard result: ",a),"OK"!=a.code){e.next=12;break}return e.next=9,F(!0);case 9:N({status:!0,message:n("SET_PRIMARY_CARD_SUCCESS")}),e.next=13;break;case 12:N({status:!0,message:n("EXCEPTION_PROCESS")});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),N({status:!0,message:n("EXCEPTION_PROCESS")});case 18:_(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,c.default.payment.removePaymentMethod(r.id);case 4:if(a=e.sent,console.log("AAAA onRemoveCard result===",a),"OK"!=a.code){e.next=12;break}return e.next=9,F(!0);case 9:N({status:!0,message:n("REMOVE_CARD_SUCCESS")}),e.next=13;break;case 12:N({status:!0,message:n("FAILED_TO_REMOVE_CARD")});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("remove card exception:",e.t0),N({status:!0,message:n("EXCEPTION_PROCESS")});case 19:_(!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("cards:",l),!O){e.next=4;break}return e.next=4,F();case 4:D(!O);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){var n=e.status,r=e.title,t=e.message,a=e.otherMessage,s=e.callBackFn;_(!1),g(!1),P({show:n,title:r,content:t,otherMessage:a,callBackFn:s||function(){return P({})}})};return(0,f.jsx)(x,{open:e.open,onClose:e.onClose,cards:l,showLoading:C,showProcessing:y,message:k,isRefresh:S,showAddCardForm:O,onRefresh:T,onSetPrimaryCard:L,onRemoveCard:M,onShowAddCardForm:B})}},20907:function(e,n,r){r.r(n),r.d(n,{default:function(){return _}});var t=r(29439),a=r(72791),s=r(13967),o=r(68870),c=r(61889),i=r(20890),d=r(13400),u=r(13239),l=r(15021),f=r(36151),x=r(39230),m=(r(30681),r(26580),r(40642)),p=r(19499),h=r(6992),C=r(88216),g=r(99298),Z=r(60151),j=r(80184),y=g.custom_page.add_card&&g.custom_page.add_card.controller?r(51678).default:h.default;function _(e){var n=m.cache.getAppConfig(),r=(0,x.$G)().t,h=(0,s.Z)().palette,g=e.cards,_=(0,a.useState)(!1),v=(0,t.Z)(_,2),w=v[0],k=v[1],P=!!(n&&n.features&&n.features.contact&&n.features.contact.reward&&n.features.contact.reward.is_supported)&&n.features.contact.reward.is_supported,A=!!(n&&n.features&&n.features.contact&&n.features.contact.order&&n.features.contact.order.is_supported)&&n.features.contact.order.is_supported;return P=!!(n&&n.features&&n.features.contact&&n.features.contact.reward&&n.features.contact.reward.return_cashback),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(C.default,{title:r("my_cards"),isOpen:e.open,onClose:e.onClose,showProcessing:e.showProcessing,message:e.message,children:[A&&(0,j.jsxs)(o.Z,{children:[(0,j.jsxs)(c.ZP,{item:!0,direction:"row",my:4,container:!0,xs:12,children:[(0,j.jsx)(c.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:(0,j.jsx)(i.Z,{variant:"h6",children:r("my_cards_orders")})}),(0,j.jsx)(c.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},onClick:function(){return k((function(e){return!e}))},children:w?(0,j.jsx)(i.Z,{children:"Done"}):(0,j.jsx)(p.DeleteIcon,{color:"#8D3395"})})})]}),e.showLoading&&(0,j.jsx)(c.ZP,{item:!0,justifyContent:"center",container:!0,children:(0,j.jsx)(u.Z,{marginTop:.5,size:"1.75rem"})}),g&&g.map((function(n,r){var t=n.card&&n.card.gateway_token&&n.card.gateway_token.length>0?n.card.gateway_token[0]:null;if(t&&"JCC"===t.gateway)return(0,j.jsx)(l.ZP,{sx:{borderBottom:r==g.length-1?"none":"1px solid",borderColor:"#f1f1f1"},children:(0,j.jsxs)(c.ZP,{item:!0,xs:12,direction:"row",container:!0,children:[(0,j.jsxs)(c.ZP,{item:!0,xs:10,container:!0,alignContent:"center",children:[n.card&&n.card.brand?(0,Z.getCardIcon)(n.card.brand):(0,j.jsx)(p.DefaultCardIcon,{}),(0,j.jsxs)(i.Z,{marginLeft:5,variant:"h6",sx:{display:"flex",alignItems:"center"},children:["**** ",n.card?n.card.last4:""," ",n.is_primary&&(0,j.jsx)(i.Z,{paddingLeft:1,variant:"subtitle2",color:h.success.main,component:"span",children:"Primary"})]})]}),(0,j.jsx)(c.ZP,{item:!0,xs:2,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},disabled:!w&&n.is_primary,onClick:w?function(){return e.onRemoveCard(n)}:function(){return e.onSetPrimaryCard(n)},children:w?(0,j.jsx)(p.RemoveIcon,{color:h.error.main}):n.is_primary?(0,j.jsx)(p.RadioCheckedIcon,{}):(0,j.jsx)(p.RadioIcon,{})})})]})},r)})),(0,j.jsx)(f.Z,{id:"myCards/btnAddACardOrder",variant:"contained",fullWidth:"true",sx:{marginTop:4,borderRadius:4},onClick:e.onShowAddCardForm,children:r("add_a_card")})]}),P&&(0,j.jsxs)(o.Z,{children:[(0,j.jsxs)(c.ZP,{item:!0,direction:"row",my:4,container:!0,xs:12,children:[(0,j.jsx)(c.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:(0,j.jsx)(i.Z,{variant:"h6",children:r("my_cards_rewards")})}),(0,j.jsx)(c.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},onClick:function(){return k((function(e){return!e}))},children:w?(0,j.jsx)(i.Z,{children:"Done"}):(0,j.jsx)(p.DeleteIcon,{color:"#8D3395"})})})]}),e.showLoading&&(0,j.jsx)(c.ZP,{item:!0,justifyContent:"center",container:!0,children:(0,j.jsx)(u.Z,{marginTop:.5,size:"1.75rem"})}),g&&g.map((function(n,r){var t=n.card&&n.card.gateway_token&&n.card.gateway_token.length>0?n.card.gateway_token[0]:null;if(t&&"JCC_MERCHANT"===t.gateway)return(0,j.jsx)(l.ZP,{sx:{borderBottom:r==g.length-1?"none":"1px solid",borderColor:"#f1f1f1"},children:(0,j.jsxs)(c.ZP,{item:!0,direction:"row",container:!0,children:[(0,j.jsxs)(c.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:[n.card&&n.card.brand?(0,Z.getCardIcon)(n.card.brand):(0,j.jsx)(p.DefaultCardIcon,{}),(0,j.jsxs)(i.Z,{marginLeft:5,variant:"h6",sx:{display:"flex",alignItems:"center"},children:["**** ",n.card?n.card.last4:""," ",n.is_primary&&(0,j.jsx)(i.Z,{paddingLeft:1,variant:"subtitle2",color:h.success.main,component:"span",children:"Primary"})]})]}),(0,j.jsx)(c.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},disabled:!w&&n.is_primary,onClick:w?function(){return e.onRemoveCard(n)}:function(){return e.onSetPrimaryCard(n)},children:w?(0,j.jsx)(p.RemoveIcon,{color:h.error.main}):n.is_primary?(0,j.jsx)(p.RadioCheckedIcon,{}):(0,j.jsx)(p.RadioIcon,{})})})]})},r)})),(0,j.jsx)(f.Z,{id:"myCards/btnAddACardReward",variant:"contained",fullWidth:!0,sx:{marginTop:4,borderRadius:4},onClick:e.onShowAddCardForm,children:r("add_a_card")})]})]}),e.showAddCardForm&&(0,j.jsx)(y,{isOpen:e.showAddCardForm,onClose:e.onShowAddCardForm})]})}}}]);
//# sourceMappingURL=960.6b6b5cab.chunk.js.map